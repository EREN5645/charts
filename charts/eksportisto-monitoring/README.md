# eksportisto-monitoring

A Grafana Agent deployment to send Eksportisto data to the Mento Grafana Cloud instance.

![Version: 0.1.1](https://img.shields.io/badge/Version-0.1.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: v0.24.2](https://img.shields.io/badge/AppVersion-v0.24.2-informational?style=flat-square)

> This is intended to be temporary to assure continued monitoring for [Mento Labs](https://www.mento.org/) spinning out of cLabs.
## What is Grafana Agent?

[Grafana Agent](https://grafana.com/docs/agent/latest/) collects and forwards telemetry data to a specific Grafana stack. It supports Prometheus metrics, Loki compatible logs, and Tempo tracces.
For metric collection, the default deployment mode is a drop-in replacement for Prometheus `remote_write`. Grafana Agent acts similarly to a single-process Prometheus, doing service discovery, scraping, and remote writing. Some Prometheus features, such as querying, local storage, recording rules, and alerts are not present.

## How do we use it?

We use a Grafana Agent deployed to the [GKE Mainnet cluster in the GCP project `celo-testnet-production`](https://github.com/celo-org/infrastructure/tree/master/terraform/root-modules/gcp/mainnet-gke) to scrape [Eksportisto](https://github.com/celo-org/eksportisto) metrics, which give insights into the economics on the Celo blockchain. These metrics are needed and used by Mento Labs for alerting on Oracles.
The metrics are sent to <https://clabsmento.grafana.net/>, a dedicated stack set up for Mento while cLabs hosts some of the workloads they are tending to.

See [Mento tech spin-out](https://docs.google.com/document/d/1g-2JvsgZk2cjSUO92s5IBUcvBfyDKSTgKKgkp9TOWVI/edit#) for more background information.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| cluster | string | `"mainnet"` | Cluster where Eksportisto is deployed, added as an external Prometheus label. |
| image.imagePullPolicy | string | `"IfNotPresent"` | Image pull policy |
| image.repository | string | `"grafana/agent"` | Image repository |
| image.tag | string | `""` | Overrides the image tag whose default is the chart appVersion. |
| remote_write.basic_auth | object | `{"password":"EKSPORTISTO_PROMETHEUS_PASSWORD","username":"EKSPORTISTO_PROMETHEUS_USERNAME"}` | Prometheus remote_write credentials, stored in Akeyless. |
| remote_write.url | string | `"https://prometheus-prod-10-prod-us-central-0.grafana.net/api/prom/push"` | Prometheus remote_write destination. |
| service | object | `{"port":80}` | Service parameters. |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0). To regenerate run `helm-docs` command at this folder.